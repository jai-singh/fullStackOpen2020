(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),i=function(e){var n=e.directory,t=e.removePerson;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number,r.a.createElement("button",{value:e.name,onClick:t},"delete"))})))},l=function(e){return r.a.createElement("form",null,r.a.createElement("h3",null,"Add a new"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNewName})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNewNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.addPerson},"add")))},m=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.searchQuery,onChange:e.performSearch}))},f=t(3),d=t.n(f),s="/api/persons",h=function(){return d.a.get(s).then((function(e){return e.data}))},v=function(e){return d.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return d.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return d.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.message,t=e.isError?"error":"message";return""!==n?r.a.createElement("div",{className:t},n):null},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(u.a)(o,2),d=f[0],s=f[1],w=Object(a.useState)(""),g=Object(u.a)(w,2),j=g[0],N=g[1],O=Object(a.useState)([]),y=Object(u.a)(O,2),k=y[0],C=y[1],S=Object(a.useState)(""),P=Object(u.a)(S,2),L=P[0],T=P[1],I=Object(a.useState)(""),x=Object(u.a)(I,2),A=x[0],D=x[1],J=Object(a.useState)(!1),Q=Object(u.a)(J,2),B=Q[0],U=Q[1];Object(a.useEffect)((function(){h().then((function(e){return c(e)}))}),[]);var q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a={name:d,number:j};""!==a.name&&(e?b(n,a).then((function(e){var a=t.map((function(t){return t.id!==n?t:e}));c(a)})).then((function(){D("Updated details about ".concat(a.name)),U(!1),setTimeout((function(){D("")}),5e3)})).catch((function(e){z()})):v(a).then((function(e){return c(t.concat(e))})).then((function(){D("Added ".concat(a.name)),U(!1),setTimeout((function(){D("")}),5e3)})).catch((function(e){z()}))),s(""),N("")},z=function(){D("Name and phone number should be at least 3 letters and 8 digits long respectively"),U(!0),setTimeout((function(){D("")}),5e3)},F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=n.reduce((function(n,t){return-1!==t.name.toLowerCase().search(e.toLowerCase())?n.concat(t):n}),[]);C(a)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:A,isError:B}),r.a.createElement(m,{searchQuery:L,performSearch:function(e){var n=e.target.value;T(n),0!==n.length?F(n):C([])}}),r.a.createElement(l,{newName:d,handleNewName:function(e){s(e.target.value)},newNumber:j,handleNewNumber:function(e){N(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name.toLowerCase()===d.toLowerCase()}));if(-1!==n){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?")))return void q(!0,t[n].id)}else q()}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(i,{directory:k,removePerson:function(e){var n=e.target.value;if(window.confirm("Delete ".concat(n," ?"))){var a=t.find((function(e){return e.name===n})).id;p(a).then((function(){var e=t.filter((function(e){return e.id!==a}));c(e),F(L,e)})).catch((function(e){D("Information of ".concat(n," has already been removed from server")),U(!0),setTimeout((function(){D("")}),5e3);var r=t.filter((function(e){return e.id!==a}));c(r),F(L,r)}))}}}))};t(36);o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.5046da60.chunk.js.map